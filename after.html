<!doctype html>

<html>
  <head>
      <link href="https://firebasestorage.googleapis.com/v0/b/donorable-372023.appspot.com/o/style.css?alt=media&token=427dceaf-f727-4597-a09e-89aff7e76467" rel="stylesheet"/>
      <script language="JavaScript" src="https://firebasestorage.googleapis.com/v0/b/donorable-372023.appspot.com/o/common.js?alt=media&token=59db2bda-d515-4ac9-ac6a-da38f7e8454d"></script>
  </head>

  <body>
    <div id="panel"></div>
    <div id="bolt"></div>
    <div id="mic"></div>

    <div class="columns">
      <div class="left">
        <div class="lightningtalks">
          Lightning<BR>Talks  &#127808;
        </div>
        <div class="whitebar"></div>
        <div class="textshadow">
          nerd's open mic night
        </div>
        <div minHeight=20></div>
        <div class="spacer">&nbsp;</div>
        <div class="functional">
          Thank you for coming tonight!
        </div>
        <div class="spacer">&nbsp;</div>
        <div>
          <script language="Javascript">
            document.write("<img src='https://chart.googleapis.com/chart?cht=qr&chl=" + qrcodeurl + "&chs=180x180&choe=UTF-8&chld=L|2'>")
          </script>
        </div>
          <div class="spacer">&nbsp;</div>
          <div class="spacer">&nbsp;</div>
        <div class="hdlogo"><img src="./assets%2Flogo_tori_white_360.png?alt=media&token=93286ec9-bc91-4056-972f-77e1c14a0b69" width="300" /></div>
      </div>

      <div class="right">
        <div class="spacer">&nbsp;</div>
        <div class="lineup">Support the dojo and keep the spirit of the valley alive.</div>
        <div class="whitebar"></div>
        <div class="largelineheight" id="list"></div>
        <div class="spacer">&nbsp;</div>
        <div class="spacer">&nbsp;</div>
      </div>
    </div>


    <script language="JavaScript">

      function fetchJSON() {
        fetch("./lineup.json?alt=media&token=48714a43-e349-4871-85b7-f346f663bcad")
          .then(response => response.json())
          .then(data => {
            if ( data.showpage !== "after") {
              location.href = pages[data.showpage];
            }
            listTalks(data);
          })
          .catch(error => {
            document.getElementById("list").innerText = "Check fetching links";
            console.error(error);
          });
      }

      // fetch JSON initially
      fetchJSON();

      // reload JSON every 5 seconds
      setInterval(fetchJSON, 5000);

      function listTalks(data) {
        document.getElementById("list").innerText="";
        data.engage.map( (method,i) => {
          const p = document.createElement("p");
          p.innerText = data.engage[i];
          p.className = "textshadow";
          document.getElementById("list").append(p);
        })
      }

    </script>

</body>

</html>
