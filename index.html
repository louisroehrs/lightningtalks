<!doctype html>

<html>
  <head>
    <script language="JavaScript" src="./lineup.js">
    </script>
    
    <link href="./style.css" rel="stylesheet"/>
  </head>
  
  <body>
    <div id="bolt"></div>
    <div id="mic"></div>
    
    <div class="columns">
      <div class="left">
        <div class="lightningtalks">
          Lightning<BR>Talks
        </div>
        <div class="whitebar"></div>
        <div class="textshadow">
          nerd's open mic night
        </div>
        <div minHeight=20></div>
        <div class="spacer">&nbsp;</div>
        <div class="functional">
          Networking 6:00 - 7:00pm<BR/>
          Talks start<span id="countdown"></span><BR>at 7:00pm<BR/>
          Discussions until 9:00pm<BR/>
        </div>
        <div class="spacer">&nbsp;</div>
        <div class="functional">
          Sign up with <span id="hosts"></span>
        </div>

        <div class="spacer">&nbsp;</div>
        <div class="date"><span id="talkdate"></span>&nbsp;&nbsp; <span id="currentTime"></span></div>
        <div class="spacer">&nbsp;</div>
        <div class="hdlogo"><img src="./assets/logo_tori_white_360.png" width="300" /></div>

      </div>

    
      <div class="right">
        <div class="spacer">&nbsp;</div>
        <div class="textshadow">Tonight's LineUp</div>
        <div class="whitebar"></div>
        <div class="largelineheight">
          <ol id="list">
          </ol>
        </div>
        <div class="spacer">&nbsp;</div>
        <div class="spacer">&nbsp;</div>
        <div class="spacer">&nbsp;</div>
      </div>

    </div>

    
    <script language="JavaScript">

      (function listTalks() {
        talks.map( (talk,i) => {
          const li = document.createElement("li");
          li.innerText = talks[i];
          document.getElementById("list").append(li);
        })
        document.getElementById("hosts").append(hosts);
      })();
                 
      
      function updateTime() {
        const startTime = "19:00";  // 7pm start time is 19:00
        const s = startTime.split(':');

        const now = new Date();
        const hours = now.getHours();
        const minutes = now.getMinutes();
        
        document.getElementById("currentTime").innerText = (hours + ":") + ((minutes < 10) ? "0" + minutes : minutes);
        document.getElementById("talkdate").innerText = now.toDateString();
      
        const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), parseInt(s[0], 10), parseInt(s[1], 10), 0, 0);
        beforeStartMs = start- now;
        if ( beforeStartMs > 0 && beforeStartMs < 24* 60 *60* 1000 ) {
          let beforeDate = new Date(beforeStartMs);
          let beforeStartMinutes = beforeDate.getMinutes();
          let beforeStartSeconds = beforeDate.getSeconds();
          document.getElementById("countdown").innerText=" in " + beforeStartMinutes + " minutes ";
          setTimeout(updateTime,8);
        } else {
          document.getElementById("countdown").innerText ="ing now ";
        }
      }

      setTimeout(updateTime, 1);
      setTimeout(() => location.reload() , 1000*30);

    </script>
  </body>
</html>



   
